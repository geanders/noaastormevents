<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="noaastormevents">
<title>Overview of noaastormevents • noaastormevents</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Overview of noaastormevents">
<meta property="og:description" content="noaastormevents">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">noaastormevents</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/noaastormevents.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/details.html">Details of `noaastormevents`</a>
    <a class="dropdown-item" href="../articles/find_events.html">find_events</a>
    <a class="dropdown-item" href="../articles/map_events.html">map_events</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/geanders/noaastormevents/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Overview of noaastormevents</h1>
                        <h4 data-toc-skip class="author">Brooke Anderson
and Ziyu Chen</h4>
            
            <h4 data-toc-skip class="date">2023-08-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/geanders/noaastormevents/blob/HEAD/vignettes/noaastormevents.Rmd" class="external-link"><code>vignettes/noaastormevents.Rmd</code></a></small>
      <div class="d-none name"><code>noaastormevents.Rmd</code></div>
    </div>

    
    
<pre><code><span><span class="co">## Note: Examples in this vignette are set to not run on CRAN. If you</span></span>
<span><span class="co">## would like to build this vignette locally, you can do so by first</span></span>
<span><span class="co">## setting the environmental variable 'NOT_CRAN' to 'true' on your</span></span>
<span><span class="co">## computer and then rebuilding the vignette.</span></span></code></pre>
<div class="section level2">
<h2 id="description-of-package">Description of package<a class="anchor" aria-label="anchor" href="#description-of-package"></a>
</h2>
<p>This package can be used to explore and map data from <a href="https://www.ncdc.noaa.gov/stormevents/" class="external-link">NOAA’s Storm Events
Database</a>. This storm event database is maintained by NOAA’s National
Centers for Environmental Information and aims to provide information,
including estimates of damage and human health impacts, for severe storm
events that affect the U.S. It has aggregated storm event listings for
tornados since the 1950s and for a broad range of event types (e.g.,
snow storms, heat waves, droughts, wildfires, floods) since 1996. This
database has been used either alone or in conjunction with other data
for a number of scientific studies. It is available for downloading at
<a href="https://www.ncdc.noaa.gov/stormevents/ftp.jsp" class="external-link uri">https://www.ncdc.noaa.gov/stormevents/ftp.jsp</a>, with
three files (one with event details, one with fatality details, and with
with location details) available per year.</p>
<p>While the online database does not have a structured API, this
package uses regular expressions to search the listings of available
files to identify the filename for a queried year and download that
year’s data to a user’s R session. The package functions then filter the
downloaded storm event listings based to the dates, locations, event
types, and other search limitations specified by the user. In
particular, this package can be used to identify storm event listings
that were close in location and time to Atlantic basin tropical storm
tracks.</p>
<p>The package has two main functions:</p>
<ul>
<li>
<code>find_events</code>: Create a dataframe with event listings by
county based on user-specified parameters (e.g., date range, specific
tropical storm, type of event) from the NOAA Storm Events database</li>
<li>
<code>map_events</code>: Create a map showing the geographic
distribution by county of certain features of an events dataframe (e.g.,
whether or not a county had an event, number of events per county, total
property damage in a county across event listings).</li>
</ul>
<p>While this package aims to create and map events data by county, some
events are listed in the original database by forecast zone rather than
county. For these observations, the package functions attempts to match
the observation with the appropriate county. However, there are some
events listed by forecast zone that cannot be matched to county, and so
are excluded from results returned by this package. Further, there may
be occasional errors in this matching, so we include a marker returned
datasets indicating which events were listed by forecast zone rather
than county, to allow further quality control checks by the user for his
or her specific applications of the package.</p>
<p>The <code>noaastormevents</code> package includes options that allow
users to find events based on proximity to a tropical storm. To use this
functionality, the user must have the <code>hurricaneexposuredata</code>
package, available from a drat repository, installed locally. This
package can be installed by running:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/eddelbuettel/drat" class="external-link">drat</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/drat/man/addRepo.html" class="external-link">addRepo</a></span><span class="op">(</span><span class="st">"geanders"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"hurricaneexposuredata"</span><span class="op">)</span></span></code></pre></div>
<p>It is important for users to note that there are limitations to this
storm events database. In particular, listings can be somewhat
subjective. A lack of event listing in the database should not be
considered definitive proof that storm conditions did not exist at a
location at a certain time. Further, the database has changed over time
in terms of which types of events are included. R users should review
the Storm Event Database’s documentation, which is available at <a href="https://www.ncdc.noaa.gov/stormevents/" class="external-link">the database’s
website</a>, to be sure they understand how to use and interpret event
listings from the database. Further, the <code>noaastormevents</code>
package includes a “Details” vignette with more details on this storm
events data and how it is processed by functions in this package.</p>
</div>
<div class="section level2">
<h2 id="creating-storm-events-datasets">Creating storm events datasets<a class="anchor" aria-label="anchor" href="#creating-storm-events-datasets"></a>
</h2>
<p>The package has two main functions. First, the
<code>find_events</code> function can be used to create a dataframe with
all storm event listings within a specified time frame. For example, the
following code creates a dataframe with all events from the NOAA Storm
Events Database listed as beginning between September 14 and 18, 1999 (a
time window relevant for Hurricane Floyd, which caused extensive damage,
especially from flooding):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sept_1999_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_events.html">find_events</a></span><span class="op">(</span>date_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1999-09-14"</span>, <span class="st">"1999-09-18"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sept_1999_events</span><span class="op">)</span></span></code></pre></div>
<p>The code call returns a data frame with a subset of data from the
Storm Events Database for 1999. Each event listing with a start data
between September 14 and 18 is included. The data frame has the
following columns:</p>
<ul>
<li>
<code>begin_date</code>: The date the event began</li>
<li>
<code>end_date</code>: The date the event ended</li>
<li>
<code>state</code>: The state in which the event occurred</li>
<li>
<code>cz_type</code>: Whether the event was listed by county or by
forecast zone (Where possible, events that are listed by forecast zone
are linked to the appropriate county FIPS code and therefore not
excluded from this returned dataframe. However, this column is included
to allow users to perform quality control on events listed by forecast
zone (<code>CZ_TYPE</code> of “Z”).)</li>
<li>
<code>cz_name</code>: The name of the county (or other area name) in
which the event occurred.</li>
<li>
<code>event_type</code>: Event type (e.g., “Flood”, “Lightning”,
“Tornado”, “Wildfire”). See <a href="https://www.ncdc.noaa.gov/stormevents/pd01016005curr.pdf" class="external-link">the NOAA
Storm Events documentation</a> for definitions of these event types</li>
<li>
<code>source</code>: The source of the storm event listing (e.g.,
trained spotter, emergency manager, general public, law
enforcement)</li>
<li>
<code>injuries_direct</code>, <code>injuries_indirect</code>,
<code>deaths_direct</code>, <code>deaths_indirect</code>,
<code>damage_property</code>, <code>damage_crops</code>: Estimates of
damage from the event to human health, property, and crops. For damages,
initial values in the database (e.g., <code>"5K"</code>) have been
converted where possible to numeric values (e.g., <code>5000</code>).
See the “Details” vignette for more details on this process.</li>
<li>
<code>fips</code>: Five-digit county (Federal Information Processing
Standard) FIPS code. This code uniquely identifies each U.S. county. If
the event was reported by forecast zone (<code>cz_type</code> of
<code>Z</code>), code within the package has used regular expressions to
try to correctly match the area name to a county FIPS (see the “Details”
vignette for more details on this process).</li>
</ul>
<p>In some cases, a user may wish to identify all storm events listings
that were close in time and place to a tropical storm track, which can
be done using the <code>storm</code> option of the
<code>find_events</code> function. To do this, the package draws on data
and functions in the packages <code>hurricaneexposure</code> (available
on CRAN) and <code>hurricaneexposuredata</code> (available through a
drat repository) to match storm event listings against tropical storm
“best tracks” data through the <code>hurricaneexposuredata</code> and
<code>hurricaneexposure</code> packages.</p>
<p>Event listings are pulled for all events that occurred within a
five-day window of the day the storm was closest to each county and that
were in counties within a user-specified distance of the storm track.
For example, to create a dataset with all event listings for counties
within 300 kilometers (<code>dist_limit</code> option) of the path of
Hurricane Floyd (<code>storm = "Floyd-1999"</code>) for a five-day
window of the storm’s closest approach to each county, the user can
run:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">floyd_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_events.html">find_events</a></span><span class="op">(</span>storm <span class="op">=</span> <span class="st">"Floyd-1999"</span>, dist_limit <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">floyd_events</span><span class="op">)</span></span></code></pre></div>
<p>Note that the storm ID includes a storm name (“Floyd”) and year
(“1999”). Both must be specified, as storm names are not retired until
they are used for a very severe storm. This functionality will only work
for storms included in the <code>hurricaneexposuredata</code> package.
These currently include:</p>
<p>Once <code>find_events</code> has been used to create a dataset of
storm event listings, the dataset can be explored. The user can do
things like determine the number of events of each type that occurred
near in time and location to a storm’s track. For example, here is a
summary of numbers of different types of events for Hurricane Floyd,
created using <code>dplyr</code> tools:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">floyd_events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">event_type</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Event type"</span>, <span class="st">"Number of events"</span><span class="op">)</span>,</span>
<span>               caption <span class="op">=</span> <span class="st">"NOAA Storm Events within 200 km and within a 5-day window of Hurricane Floyd."</span><span class="op">)</span></span></code></pre></div>
<p>Similarly, you could create a summary with the states in which the
most events were listed and give the number and type of events in each
of those counties:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">floyd_events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">state</span>, <span class="va">event_type</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">state</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>event_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">event_type</span>, <span class="st">" ("</span>, <span class="va">n</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">state</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>Total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>            Events <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">event_type</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">Total</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mapping-storm-events">Mapping storm events<a class="anchor" aria-label="anchor" href="#mapping-storm-events"></a>
</h2>
<p>The package also has a function, <code>map_events</code>, for mapping
several different features from the storm event dataframes returned by
<code>find_events</code>. This function is meant to provide reasonable
defaults for many maps a user might want to create with this data, but
in some cases might not provide the exact map a user would like to
create. In that case, we recommend the user try the
<code>choroplethr</code> package, which can be used to map US county
data as long as the data includes county FIPS codes, as the dataframes
returned by <code>find_events</code> do.</p>
<p>The <code>map_events</code> function allows you to create maps of
several features of the dataframe returned by
<code>find_events</code>:</p>
<ul>
<li>“any events”: Map whether or not a county had any listed events</li>
<li>“number of events”: Map the number of events listed for a
county</li>
<li>“direct deaths”: Map the total count of direct deaths across all
events listed for a county</li>
<li>“direct injuries”: Map the total count of direct injuries across all
events listed for a county</li>
<li>“indirect deaths”: Map the total count of direct deaths across all
events listed for a county</li>
<li>“indirect injuries”: Map the total count of direct injuries across
all events listed for a county</li>
<li>“property damage”: Map the total property damage across all events
listed for a county</li>
<li>“crop damage”: Map the total crop damage across all events listed
for a county</li>
</ul>
<p>The maps for property and crop damage use a logarithmic scale, while
others use an untransformed scale. Listings for all events within a
county in the input dataframe are summed to create county-level values
to map. While the function allows mapping indirect injuries and deaths,
in practice is seems these are rarely listed in recent Storm Events
data, so these may not create informative maps.</p>
<p>The <code>map_events</code> function inputs a dataframe as created by
<code>find_events</code>. For example, which counties had events listed
that started between September 14 and 18, 2009, you can run:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_events.html">find_events</a></span><span class="op">(</span>date_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1999-09-14"</span>, <span class="st">"1999-09-18"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/map_events.html">map_events</a></span><span class="op">(</span><span class="va">event_data</span><span class="op">)</span></span></code></pre></div>
<p>Because the first argument of <code>map_events</code> is a dataframe,
you can also use the pipe operator (<code>%&gt;%</code>) to pipe the
results of a call to <code>find_events</code> directly into
<code>map_events</code>, as shown in the next example.</p>
<p>The <code>map_events</code> function includes a <code>states</code>
option, to allow the user to limit the map to a subset of states (only
states in the continental US can be included). This option also allows
the inputs of “east” (the default, maps only states in the eastern half
of the United States) and “all” (maps all states in the continental US).
To create a map of all events within 300 km of the track of Hurricane
Floyd with start dates in a five-day window of the storm’s closest date
to each county, and to map all continental states, you can run:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">floyd_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_events.html">find_events</a></span><span class="op">(</span>storm <span class="op">=</span> <span class="st">"Floyd-1999"</span>, dist_limit <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> </span>
<span><span class="va">floyd_events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/map_events.html">map_events</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></code></pre></div>
<p>If you instead would like to limit the map to states along the East
Coast and plot the number of reported events per county, you could
instead run:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">floyd_events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/map_events.html">map_events</a></span><span class="op">(</span>plot_type <span class="op">=</span> <span class="st">"number of events"</span>,</span>
<span>             states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"florida"</span>, <span class="st">"georgia"</span>, <span class="st">"south carolina"</span>, <span class="st">"north carolina"</span>,</span>
<span>                        <span class="st">"virginia"</span>, <span class="st">"maryland"</span>, <span class="st">"delaware"</span>, <span class="st">"pennsylvania"</span>,</span>
<span>                        <span class="st">"new jersey"</span>, <span class="st">"new york"</span>, <span class="st">"connecticut"</span>, <span class="st">"rhode island"</span>,</span>
<span>                        <span class="st">"massachusetts"</span>, <span class="st">"vermont"</span>, <span class="st">"new hampshire"</span>, <span class="st">"maine"</span>, </span>
<span>                        <span class="st">"west virginia"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The maps for crop and property damage use a logarithmic scale, which
typically shows differences in these measurements better than an
untransformed scale. For example, here is the call and resulting map to
map crop damage associated with Hurricane Floyd in North Carolina,
Virginia, and Maryland:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">floyd_events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>   </span>
<span>  <span class="fu"><a href="../reference/map_events.html">map_events</a></span><span class="op">(</span>plot_type <span class="op">=</span> <span class="st">"crop damage"</span>,</span>
<span>             states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north carolina"</span>, <span class="st">"virginia"</span>, <span class="st">"maryland"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Property damage can be mapped in a similar way:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">floyd_events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/map_events.html">map_events</a></span><span class="op">(</span>plot_type <span class="op">=</span> <span class="st">"property damage"</span>,</span>
<span>             states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"florida"</span>, <span class="st">"georgia"</span>, <span class="st">"south carolina"</span>, <span class="st">"north carolina"</span>,</span>
<span>                        <span class="st">"virginia"</span>, <span class="st">"maryland"</span>, <span class="st">"delaware"</span>, <span class="st">"pennsylvania"</span>,</span>
<span>                        <span class="st">"new jersey"</span>, <span class="st">"new york"</span>, <span class="st">"connecticut"</span>, <span class="st">"rhode island"</span>,</span>
<span>                        <span class="st">"massachusetts"</span>, <span class="st">"vermont"</span>, <span class="st">"new hampshire"</span>, <span class="st">"maine"</span>, </span>
<span>                        <span class="st">"west virginia"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The track of a tropical storm can be added to a map by specifying the
name of the storm with the <code>storm</code> argument and setting
<code>add_tracks</code> to <code>TRUE</code>. For example, the track of
Hurricane Floyd can be added to a map of crop damage in North Carolina,
Virginia, and Maryland from the example dataframe with the call:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">floyd_events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>   </span>
<span>  <span class="fu"><a href="../reference/map_events.html">map_events</a></span><span class="op">(</span>plot_type <span class="op">=</span> <span class="st">"crop damage"</span>,</span>
<span>             states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"north carolina"</span>, <span class="st">"virginia"</span>, <span class="st">"maryland"</span><span class="op">)</span>,</span>
<span>             storm <span class="op">=</span> <span class="st">"Floyd-1999"</span>, add_tracks <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="find-out-more">Find out more<a class="anchor" aria-label="anchor" href="#find-out-more"></a>
</h2>
<p>There are many more details describing how this package works, as
well as details on the Storm Events data, in the “Details” vignette that
also comes with this package.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Brooke Anderson, Ziyu Chen, Therese Kondash.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
