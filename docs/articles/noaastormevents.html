<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="noaastormevents">
<title>Overview of noaastormevents • noaastormevents</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Overview of noaastormevents">
<meta property="og:description" content="noaastormevents">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">noaastormevents</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/noaastormevents.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a01_find_events.html">Finding storm events</a>
    <a class="dropdown-item" href="../articles/a02_map_events.html">Mapping storm events</a>
    <a class="dropdown-item" href="../articles/a03_details.html">Details</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/geanders/noaastormevents/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Overview of noaastormevents</h1>
                        <h4 data-toc-skip class="author">Brooke
Anderson, Ziyu Chen, and Jordan Robinson</h4>
            
            <h4 data-toc-skip class="date">2023-08-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/geanders/noaastormevents/blob/HEAD/vignettes/noaastormevents.Rmd" class="external-link"><code>vignettes/noaastormevents.Rmd</code></a></small>
      <div class="d-none name"><code>noaastormevents.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="description-of-package">Description of package<a class="anchor" aria-label="anchor" href="#description-of-package"></a>
</h2>
<p>This package can be used to explore and map data from <a href="https://www.ncdc.noaa.gov/stormevents/" class="external-link">NOAA’s Storm Events
Database</a>. This storm event database is maintained by NOAA’s National
Centers for Environmental Information and aims to provide information,
including estimates of damage and human health impacts, for severe storm
events that affect the U.S. It has aggregated storm event listings for
tornados since the 1950s and for a broad range of event types (e.g.,
snow storms, heat waves, droughts, wildfires, floods) since 1996. This
database has been used either alone or in conjunction with other data
for a number of scientific studies. It is available for downloading at
<a href="https://www.ncdc.noaa.gov/stormevents/ftp.jsp" class="external-link uri">https://www.ncdc.noaa.gov/stormevents/ftp.jsp</a>, with
three files (one with event details, one with fatality details, and with
with location details) available per year.</p>
<p>While the online database does not have a structured API, this
package uses regular expressions to search the listings of available
files to identify the filename for a queried year and download that
year’s data to a user’s R session. The package functions then filter the
downloaded storm event listings based on the dates, locations, event
types, and other search limitations specified by the user. In
particular, this package can be used to identify storm event listings
that were close in location and time to Atlantic basin tropical storm
tracks.</p>
<p>The package has two main functions:</p>
<ul>
<li>
<code>find_events</code>: Create a dataframe with event listings by
county based on user-specified parameters (e.g., date range, specific
tropical storm, type of event) from the NOAA Storm Events database</li>
<li>
<code>map_events</code>: Create a map showing the geographic
distribution by county of certain features of an events dataframe (e.g.,
whether or not a county had an event, number of events per county, total
property damage in a county across event listings).</li>
</ul>
<p>While this package aims to create and map events data by county, some
events are listed in the original database by forecast zone rather than
county. For these observations, the package functions attempts to match
the observation with the appropriate county. However, there are some
events listed by forecast zone that cannot be matched to county, and so
are excluded from results returned by this package. Further, there may
be occasional errors in this matching, so we include a marker in
returned datasets indicating which events were listed by forecast zone
rather than county, to allow further quality control checks by the user
for their specific applications of the package.</p>
<p>The <code>noaastormevents</code> package includes options that allow
users to find events based on proximity to a tropical storm. To use this
functionality, the user must have the <code>hurricaneexposuredata</code>
package, available from a drat repository, installed locally. This
package can be installed by running:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/eddelbuettel/drat" class="external-link">drat</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/drat/man/addRepo.html" class="external-link">addRepo</a></span><span class="op">(</span><span class="st">"geanders"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"hurricaneexposuredata"</span><span class="op">)</span></span></code></pre></div>
<p>It is important for users to note that there are limitations to this
storm events database. In particular, listings can be somewhat
subjective. A lack of event listing in the database should not be
considered definitive proof that storm conditions did not exist at a
location at a certain time. Further, the database has changed over time
in terms of which types of events are included. R users should review
the Storm Event Database’s documentation, which is available at <a href="https://www.ncdc.noaa.gov/stormevents/" class="external-link">the database’s
website</a>, to be sure they understand how to use and interpret event
listings from the database. Further, the <code>noaastormevents</code>
package includes a “Details” vignette with more details on this storm
events data and how it is processed by functions in this package.</p>
</div>
<div class="section level2">
<h2 id="creating-storm-events-datasets">Creating storm events datasets<a class="anchor" aria-label="anchor" href="#creating-storm-events-datasets"></a>
</h2>
<p>The package has two main functions. First, the
<code>find_events</code> function can be used to create a dataframe with
all storm event listings within a specified time frame. For example, the
following code creates a dataframe with all events from the NOAA Storm
Events Database listed as beginning between September 14 and 18, 1999 (a
time window relevant for Hurricane Floyd, which caused extensive damage,
especially from flooding):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sept_1999_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_events.html">find_events</a></span><span class="op">(</span>date_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1999-09-14"</span>, <span class="st">"1999-09-18"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sept_1999_events</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 14</span></span></span>
<span><span class="co">##   begin_date end_date   state  cz_type cz_name event_type source injuries_direct</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1999-09-14 1999-09-14 Flori… C       Duval   Thunderst… TRAIN…               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 1999-09-14 1999-09-14 Flori… C       St. Jo… Thunderst… TRAIN…               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 1999-09-14 1999-09-14 Arizo… C       Marico… Hail       OFFIC…               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 1999-09-14 1999-09-14 Arizo… C       Marico… Hail       TRAIN…               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 1999-09-14 1999-09-14 Arizo… C       Pinal   Thunderst… NEWSP…               0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> 1999-09-14 1999-09-14 Arizo… C       Marico… Lightning  EMERG…               1</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6 more variables: injuries_indirect &lt;int&gt;, deaths_direct &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   deaths_indirect &lt;int&gt;, damage_property &lt;dbl&gt;, damage_crops &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   fips &lt;dbl&gt;</span></span></span></code></pre>
<p>The code call returns a data frame with a subset of data from the
Storm Events Database for 1999. Each event listing with a start date
between September 14 and 18 is included. The data frame has the
following columns:</p>
<ul>
<li>
<code>begin_date</code>: The date the event began</li>
<li>
<code>end_date</code>: The date the event ended</li>
<li>
<code>state</code>: The state in which the event occurred</li>
<li>
<code>cz_type</code>: Whether the event was listed by county or by
forecast zone (Where possible, events that are listed by forecast zone
are linked to the appropriate county FIPS code and therefore not
excluded from this returned dataframe. However, this column is included
to allow users to perform quality control on events listed by forecast
zone (<code>CZ_TYPE</code> of “Z”).)</li>
<li>
<code>cz_name</code>: The name of the county (or other area name) in
which the event occurred.</li>
<li>
<code>event_type</code>: Event type (e.g., “Flood”, “Lightning”,
“Tornado”, “Wildfire”). See <a href="https://www.ncdc.noaa.gov/stormevents/pd01016005curr.pdf" class="external-link">the NOAA
Storm Events documentation</a> for definitions of these event types</li>
<li>
<code>source</code>: The source of the storm event listing (e.g.,
trained spotter, emergency manager, general public, law
enforcement)</li>
<li>
<code>injuries_direct</code>, <code>injuries_indirect</code>,
<code>deaths_direct</code>, <code>deaths_indirect</code>,
<code>damage_property</code>, <code>damage_crops</code>: Estimates of
damage from the event to human health, property, and crops. For damages,
initial values in the database (e.g., <code>"5K"</code>) have been
converted where possible to numeric values (e.g., <code>5000</code>).
See the “Details” vignette for more details on this process.</li>
<li>
<code>fips</code>: Five-digit county (Federal Information Processing
Standard) FIPS code. This code uniquely identifies each U.S. county. If
the event was reported by forecast zone (<code>cz_type</code> of
<code>Z</code>), code within the package has used regular expressions to
try to correctly match the area name to a county FIPS (see the “Details”
vignette for more details on this process).</li>
</ul>
<p>There are several ways that you can customize the use of the
<code>find_events</code> function. For more details, see the article on
<a href="http://geanders.github.io/noaastormevents/articles/find_events.html" class="external-link">“Finding
Events”</a>.</p>
</div>
<div class="section level2">
<h2 id="mapping-storm-events">Mapping storm events<a class="anchor" aria-label="anchor" href="#mapping-storm-events"></a>
</h2>
<p>The package also has a function, <code>map_events</code>, for mapping
several different features from the storm event dataframes returned by
<code>find_events</code>. This function is meant to provide reasonable
defaults for many maps a user might want to create with this data, but
in some cases might not provide the exact map a user would like to
create. In that case, we recommend the user try the
<code>choroplethr</code> package, which can be used to map US county
data as long as the data includes county FIPS codes, as the dataframes
returned by <code>find_events</code> do.</p>
<p>The <code>map_events</code> function allows you to create maps of
several features of the dataframe returned by
<code>find_events</code>:</p>
<ul>
<li>“any events”: Map whether or not a county had any listed events</li>
<li>“number of events”: Map the number of events listed for a
county</li>
<li>“direct deaths”: Map the total count of direct deaths across all
events listed for a county</li>
<li>“direct injuries”: Map the total count of direct injuries across all
events listed for a county</li>
<li>“indirect deaths”: Map the total count of direct deaths across all
events listed for a county</li>
<li>“indirect injuries”: Map the total count of direct injuries across
all events listed for a county</li>
<li>“property damage”: Map the total property damage across all events
listed for a county</li>
<li>“crop damage”: Map the total crop damage across all events listed
for a county</li>
</ul>
<p>The maps for property and crop damage use a logarithmic scale, while
others use an untransformed scale. Listings for all events within a
county in the input dataframe are summed to create county-level values
to map. While the function allows mapping indirect injuries and deaths,
in practice is seems these are rarely listed in recent Storm Events
data, so these may not create informative maps.</p>
<p>The <code>map_events</code> function inputs a dataframe as created by
<code>find_events</code>. For example, to map which counties had events
listed that started between September 14 and 18, 2009, you can run:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_events.html">find_events</a></span><span class="op">(</span>date_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1999-09-14"</span>, <span class="st">"1999-09-18"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/map_events.html">map_events</a></span><span class="op">(</span><span class="va">event_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="noaastormevents_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
<p>There are many ways you can customize the use of this function. For
more details on how to use the <code>map_events</code> function, see the
article on <a href="http://geanders.github.io/noaastormevents/articles/map_events.html" class="external-link">“Mapping
Events”</a>.</p>
</div>
<div class="section level2">
<h2 id="find-out-more">Find out more<a class="anchor" aria-label="anchor" href="#find-out-more"></a>
</h2>
<p>There are many more details describing how this package works, as
well as details on the Storm Events data, in the <a href="http://geanders.github.io/noaastormevents/articles/details.html" class="external-link">“Details”
article</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Brooke Anderson, Ziyu Chen, Therese Kondash, Jordan Robinson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
