<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="For events reported by forecast zone, use regular expressions to match
as many as possible to counties."><title>Match events by forecast zone to county — match_forecast_county • noaastormevents</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Match events by forecast zone to county — match_forecast_county"><meta property="og:description" content="For events reported by forecast zone, use regular expressions to match
as many as possible to counties."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">noaastormevents</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/noaastormevents.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/details.html">Details of `noaastormevents`</a>
    <a class="dropdown-item" href="../articles/find_events.html">Finding storm events</a>
    <a class="dropdown-item" href="../articles/map_events.html">Mapping storm events</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/geanders/noaastormevents/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Match events by forecast zone to county</h1>
      <small class="dont-index">Source: <a href="https://github.com/geanders/noaastormevents/blob/HEAD/R/adjust.R" class="external-link"><code>R/adjust.R</code></a></small>
      <div class="d-none name"><code>match_forecast_county.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>For events reported by forecast zone, use regular expressions to match
as many as possible to counties.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">match_forecast_county</span><span class="op">(</span><span class="va">storm_data_z</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>storm_data_z</dt>
<dd><p>A dataframe of storm events reported by forecast zone
(i.e., <code>cz_type == "Z"</code>) rather than county. This dataframe should
include the columns:</p><ul><li><p><code>state</code>: State name, in lowercase</p></li>
<li><p><code>cz_name</code>: Location name, in lowercase</p></li>
<li><p><code>cz_fips</code>: Forecast zone FIPS</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The dataframe of events input to the function, with county FIPS
   added for events matched to a county in the <code>fips</code> column. Events
   that could not be matched are kept in the dataframe, but the <code>fips</code></p>


<p>code is set to <code>NA</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function tries to match the <code>cz_name</code> of each event to
   a state and county name from the <code>county.fips</code> dataframe that comes
   with the <code>maps</code> package. The following steps are taken to try to
   match each <code>cz_name</code> to a state and county name from <code>county.fips</code>:</p><ol><li><p>Tries to match <code>cz_name</code> to the county name in <code>county.fips</code>
       after removing any periods or apostrophes in <code>cz_name</code>.</p></li>
<li><p>Next, for county names with "county" in them, try to match the word before
        "county" to county name in <code>county.fips</code>. Then check the two words before
        "county", then the one and two words before "counties".</p></li>
<li><p>Next, pull out the last word in <code>cz_name</code> and try to match it to the county
        name in <code>county.fips</code>. The check the last two words in <code>cz_name</code>, then check
        the last three words in <code>cz_name</code>.</p></li>
<li><p>Next, pull any words right before a slash and check that against the county name.</p></li>
<li><p>Finally, try removing anything in parentheses in <code>cz_name</code> before matching.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function does not provide any matches for events outside
   of the continental U.S.</p>
<p>You may want to hand-check that event listings with names like "Lake", "Mountain", and
   "Park" have not been unintentionally linked to a county like "Lake County". While such
   examples seem rare in the example data used to develop this function (NOAA Storm Events
   for 2015), it can sometimes happen. To do so, you can use the <code>str_detect</code> function
   from the <code>stringr</code> package.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">counties_to_parse</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/deprecated.html" class="external-link">data_frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>           event_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">19</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           cz_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Suffolk"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Eastern Greenbrier"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Ventura County Mountains"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Central And Southeast Montgomery"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Western Cape May"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"San Diego County Coastal Areas"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Blount/Smoky Mountains"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"St. Mary's"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Central &amp; Eastern Lake County"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Mountains Southwest Shasta County To Northern Lake County"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Kings (Brooklyn)"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Lower Bucks"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Central St. Louis"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Curry County Coast"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Lincoln County Except The Sheep Range"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Shasta Lake/North Shasta County"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Coastal Palm Beach County"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Larimer &amp; Boulder Counties Between 6000 &amp; 9000 Feet"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Yellowstone National Park"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Virginia"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"West Virginia"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"California"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Maryland"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"New Jersey"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"California"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Tennessee"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Maryland"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Oregon"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"California"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"New York"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Pennsylvania"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Minnesota"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Oregon"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Nevada"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"California"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Florida"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Colorado"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Wyoming"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>`data_frame()` was deprecated in tibble 1.1.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Please use `tibble()` instead.</span>
<span class="r-in"><span><span class="fu">match_forecast_county</span><span class="op">(</span><span class="va">counties_to_parse</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 19 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    event_id cz_name                                                  state  fips</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>        1 Suffolk                                                  Virg… <span style="text-decoration: underline;">51</span>800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>        2 Eastern Greenbrier                                       West… <span style="text-decoration: underline;">54</span>025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>        3 Ventura County Mountains                                 Cali…  <span style="text-decoration: underline;">6</span>111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>        4 Central And Southeast Montgomery                         Mary… <span style="text-decoration: underline;">24</span>031</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>        5 Western Cape May                                         New … <span style="text-decoration: underline;">34</span>009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>        6 San Diego County Coastal Areas                           Cali…  <span style="text-decoration: underline;">6</span>073</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>        7 Blount/Smoky Mountains                                   Tenn… <span style="text-decoration: underline;">47</span>009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>        8 St. Mary's                                               Mary… <span style="text-decoration: underline;">24</span>037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>        9 Central &amp; Eastern Lake County                            Oreg… <span style="text-decoration: underline;">41</span>037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>       10 Mountains Southwest Shasta County To Northern Lake Coun… Cali…  <span style="text-decoration: underline;">6</span>089</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span>       11 Kings (Brooklyn)                                         New … <span style="text-decoration: underline;">36</span>047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span>       12 Lower Bucks                                              Penn… <span style="text-decoration: underline;">42</span>017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span>       13 Central St. Louis                                        Minn… <span style="text-decoration: underline;">27</span>137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span>       14 Curry County Coast                                       Oreg… <span style="text-decoration: underline;">41</span>015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span>       15 Lincoln County Except The Sheep Range                    Neva… <span style="text-decoration: underline;">32</span>017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span>       16 Shasta Lake/North Shasta County                          Cali…  <span style="text-decoration: underline;">6</span>089</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">17</span>       17 Coastal Palm Beach County                                Flor… <span style="text-decoration: underline;">12</span>099</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">18</span>       18 Larimer &amp; Boulder Counties Between 6000 &amp; 9000 Feet      Colo…  <span style="text-decoration: underline;">8</span>013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">19</span>       19 Yellowstone National Park                                Wyom…    <span style="color: #BB0000;">NA</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Brooke Anderson, Ziyu Chen, Therese Kondash, Jordan Robinson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

